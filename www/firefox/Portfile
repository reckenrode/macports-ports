# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                firefox
version             96.0.1

categories          www aqua
maintainers         largeandhighquality.com:randy

description         Open source web browser for macOS
long_description    Firefox is an open source web browser developed by the Mozilla Foundation.  It \
                    is customizable and includes tracking protection along with other features.

homepage            https://www.mozilla.org/firefox/

platforms           macosx
license             MPL-2

distfiles           "Firefox ${version}.dmg"

source              ./Portfile.langs

depends_extract     port:undmg

extract.cmd         undmg
extract.mkdir       yes
extract.pre_args
extract.post_args
extract.suffix      .dmg

use_configure       no

build {
    set fd [open ${worksrcpath}/Firefox.app/Contents/Resources/defaults/pref/channel-prefs.js a]
    puts $fd {pref("app.update.auto", "false");}
    close $fd
}

destroot {
    copy ${worksrcpath}/Firefox.app ${destroot}${applications_dir}
}
